const categories = {
    "Science": { 
        100: { q: "What is the chemical formula for water?", a: "H2O" }, 
        200: { q: "What planet is known as the Red Planet?", a: "Mars" }, 
        300: { q: "What organelle is the powerhouse of the cell?", a: "Mitochondria" }, 
        400: { q: "What force keeps us on the ground?", a: "Gravity" }, 
        500: { q: "Who developed the theory of relativity?", a: "Einstein" }
    },
    "History": { 
        100: { q: "Who was the first President of the United States?", a: "George Washington" }, 
        200: { q: "In what year did World War II end?", a: "1945" }, 
        300: { q: "What ship carried the Pilgrims to America?", a: "The Mayflower" }, 
        400: { q: "What event involved tea being thrown into a harbor?", a: "Boston Tea Party" }, 
        500: { q: "Who was the French military leader exiled to Elba?", a: "Napoleon" }
    }
};

let scores = {};
let currentQuestion = null;
let currentPoints = 0;

function setupTeams() {
    const numTeams = parseInt(document.getElementById("num-teams").value);
    const teamInputsDiv = document.getElementById("team-inputs");
    teamInputsDiv.innerHTML = "";

    scores = {};

    for (let i = 1; i <= numTeams; i++) {
        const teamName = prompt(`Enter name for Team ${i}:`);
        scores[`team${i}`] = 0;

        const scoreBoard = document.getElementById("score-board");
        let scoreDiv = document.createElement("div");
        scoreDiv.className = "team";
        scoreDiv.id = `team${i}`;
        scoreDiv.innerText = `${teamName}: $0`;
        scoreBoard.appendChild(scoreDiv);

        const teamSelect = document.getElementById("team-select");
        let option = document.createElement("option");
        option.value = `team${i}`;
        option.innerText = teamName;
        teamSelect.appendChild(option);
    }

    document.getElementById("setup-container").style.display = "none";
    document.getElementById("game-container").style.display = "block";
    generateBoard();
}

function generateBoard() {
    const board = document.getElementById("jeopardy-board");
    board.innerHTML = "";

    Object.keys(categories).forEach(category => {
        let header = document.createElement("div");
        header.className = "category";
        header.innerText = category;
        board.appendChild(header);
    });

    for (let points of [100, 200, 300, 400, 500]) {
        Object.keys(categories).forEach(category => {
            let button = document.createElement("button");
            button.className = "question";
            button.innerText = `$${points}`;
            button.onclick = () => showQuestion(category, points, button);
            board.appendChild(button);
        });
    }
}

function showQuestion(category, points, button) {
    currentQuestion = { category, points, button };
    document.getElementById("question-text").innerText = categories[category][points].q;
    document.getElementById("popup").style.display = "block";
}

function showAnswer() {
    document.getElementById("popup").style.display = "none";
    document.getElementById("answer-text").innerText = `Answer: ${categories[currentQuestion.category][currentQuestion.points].a}`;
    document.getElementById("answer-popup").style.display = "block";
}

function updateScore(correct) {
    const team = document.getElementById("team-select").value;
    scores[team] += correct ? currentQuestion.points : -currentQuestion.points;
    document.getElementById(team).innerText = `${team}: $${scores[team]}`;
    
    currentQuestion.button.disabled = true;
    document.getElementById("answer-popup").style.display = "none";
}
